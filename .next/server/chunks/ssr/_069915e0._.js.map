{"version":3,"sources":["../../../../lib/auth.ts","../../../../app/kyc/page.tsx","../../../../node_modules/lucide-react/src/icons/upload.ts","../../../../node_modules/lucide-react/src/icons/shield-check.ts"],"sourcesContent":["'use client'\n\nexport function getUserId(): number | null {\n    if (typeof window === 'undefined') return null\n    const userStr = localStorage.getItem('user')\n    if (!userStr) return null\n    try {\n        const user = JSON.parse(userStr)\n        return user.id || null\n    } catch {\n        return null\n    }\n}\n\nexport function getUser(): any | null {\n    if (typeof window === 'undefined') return null\n    const userStr = localStorage.getItem('user')\n    if (!userStr) return null\n    try {\n        return JSON.parse(userStr)\n    } catch {\n        return null\n    }\n}\n\nexport function isAuthenticated(): boolean {\n    return getUserId() !== null\n}\n\n","\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport Navbar from \"@/components/layouts/navbar\"\nimport Footer from \"@/components/layouts/footer\"\nimport { ShieldCheck, Upload, AlertCircle } from \"lucide-react\"\nimport { getUserId } from \"@/lib/auth\"\n\nexport default function KYCPage() {\n    const router = useRouter()\n    const [step, setStep] = useState(1)\n    const [loading, setLoading] = useState(false)\n    const [formData, setFormData] = useState({\n        fullName: \"\",\n        dob: \"\",\n        panNumber: \"\",\n    })\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault()\n        const userId = getUserId()\n        if (!userId) {\n            alert(\"Please log in to complete KYC.\")\n            router.push(\"/login\")\n            return\n        }\n\n        setLoading(true)\n\n        try {\n            const { submitKYC } = await import(\"@/lib/actions\")\n            const result = await submitKYC(userId, formData)\n\n            if (result.success) {\n                // Update localStorage user data\n                const storedUser = localStorage.getItem(\"user\")\n                if (storedUser) {\n                    const userObj = JSON.parse(storedUser)\n                    localStorage.setItem(\"user\", JSON.stringify({ ...userObj, kycStatus: \"VERIFIED\" }))\n                }\n                setStep(3) // Success step\n            } else {\n                alert(\"Verification failed. Please try again.\")\n            }\n        } catch (error) {\n            console.error(error)\n            alert(\"Something went wrong\")\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return (\n        <>\n            <Navbar />\n            <main className=\"min-h-screen py-16 px-4 bg-slate-50\">\n                <div className=\"max-w-xl mx-auto\">\n                    <div className=\"text-center mb-10\">\n                        <h1 className=\"text-3xl font-bold text-secondary mb-3\">Identity Verification</h1>\n                        <p className=\"text-slate-600\">Complete KYC to start investing in premium real estate.</p>\n                    </div>\n\n                    <div className=\"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden\">\n                        {/* Progress Bar */}\n                        <div className=\"flex border-b border-slate-200\">\n                            <div className={`flex-1 py-3 text-center text-sm font-semibold ${step >= 1 ? \"text-blue-600 bg-blue-50\" : \"text-slate-400\"}`}>\n                                1. Personal Details\n                            </div>\n                            <div className={`flex-1 py-3 text-center text-sm font-semibold ${step >= 2 ? \"text-blue-600 bg-blue-50\" : \"text-slate-400\"}`}>\n                                2. Documents\n                            </div>\n                            <div className={`flex-1 py-3 text-center text-sm font-semibold ${step >= 3 ? \"text-blue-600 bg-blue-50\" : \"text-slate-400\"}`}>\n                                3. Verification\n                            </div>\n                        </div>\n\n                        <div className=\"p-8\">\n                            {step === 1 && (\n                                <form onSubmit={(e) => { e.preventDefault(); setStep(2) }} className=\"space-y-6\">\n                                    <div>\n                                        <label className=\"block text-sm font-semibold text-secondary mb-2\">Full Name (as per PAN)</label>\n                                        <input\n                                            required\n                                            type=\"text\"\n                                            className=\"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 outline-none\"\n                                            placeholder=\"e.g. Rahul Sharma\"\n                                            value={formData.fullName}\n                                            onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-sm font-semibold text-secondary mb-2\">Date of Birth</label>\n                                        <input\n                                            required\n                                            type=\"date\"\n                                            className=\"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 outline-none\"\n                                            value={formData.dob}\n                                            onChange={(e) => setFormData({ ...formData, dob: e.target.value })}\n                                        />\n                                    </div>\n                                    <div>\n                                        <label className=\"block text-sm font-semibold text-secondary mb-2\">PAN Number</label>\n                                        <input\n                                            required\n                                            type=\"text\"\n                                            maxLength={10}\n                                            className=\"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 outline-none uppercase\"\n                                            placeholder=\"ABCDE1234F\"\n                                            value={formData.panNumber}\n                                            onChange={(e) => setFormData({ ...formData, panNumber: e.target.value.toUpperCase() })}\n                                        />\n                                    </div>\n                                    <button type=\"submit\" className=\"w-full py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition\">\n                                        Continue\n                                    </button>\n                                </form>\n                            )}\n\n                            {step === 2 && (\n                                <div className=\"space-y-6\">\n                                    <div className=\"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center bg-slate-50 hover:bg-slate-100 transition cursor-pointer\">\n                                        <Upload className=\"mx-auto text-slate-400 mb-4\" size={40} />\n                                        <p className=\"font-semibold text-secondary\">Upload PAN Card</p>\n                                        <p className=\"text-xs text-slate-500 mt-2\">JPG, PNG or PDF (Max 5MB)</p>\n                                    </div>\n\n                                    <div className=\"bg-blue-50 p-4 rounded-lg flex gap-3 items-start\">\n                                        <ShieldCheck className=\"text-blue-600 shrink-0 mt-1\" size={20} />\n                                        <p className=\"text-sm text-blue-800\">Your data is encrypted and stored securely. We only use this for regulatory compliance.</p>\n                                    </div>\n\n                                    <div className=\"flex gap-4\">\n                                        <button\n                                            onClick={() => setStep(1)}\n                                            className=\"flex-1 py-3 text-slate-600 font-semibold hover:bg-slate-50 rounded-lg\"\n                                        >\n                                            Back\n                                        </button>\n                                        <button\n                                            onClick={handleSubmit}\n                                            disabled={loading}\n                                            className=\"flex-1 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition flex justify-center items-center\"\n                                        >\n                                            {loading ? \"Verifying...\" : \"Submit Verification\"}\n                                        </button>\n                                    </div>\n                                </div>\n                            )}\n\n                            {step === 3 && (\n                                <div className=\"text-center py-8\">\n                                    <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n                                        <ShieldCheck className=\"text-green-600\" size={40} />\n                                    </div>\n                                    <h2 className=\"text-2xl font-bold text-secondary mb-3\">You are Verified!</h2>\n                                    <p className=\"text-slate-600 mb-8\">Your KYC has been successfully approved. You can now start investing in all available properties.</p>\n                                    <button\n                                        onClick={() => router.push('/explore')}\n                                        className=\"px-8 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition\"\n                                    >\n                                        Start Investing\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </main>\n            <Footer />\n        </>\n    )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Upload\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4IiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMyIgeTI9IjE1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/upload\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Upload = createLucideIcon('Upload', [\n  ['path', { d: 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4', key: 'ih7n3h' }],\n  ['polyline', { points: '17 8 12 3 7 8', key: 't8dd8p' }],\n  ['line', { x1: '12', x2: '12', y1: '3', y2: '15', key: 'widbto' }],\n]);\n\nexport default Upload;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShieldCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTNjMCA1LTMuNSA3LjUtNy42NiA4Ljk1YTEgMSAwIDAgMS0uNjctLjAxQzcuNSAyMC41IDQgMTggNCAxM1Y2YTEgMSAwIDAgMSAxLTFjMiAwIDQuNS0xLjIgNi4yNC0yLjcyYTEuMTcgMS4xNyAwIDAgMSAxLjUyIDBDMTQuNTEgMy44MSAxNyA1IDE5IDVhMSAxIDAgMCAxIDEgMXoiIC8+CiAgPHBhdGggZD0ibTkgMTIgMiAyIDQtNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/shield-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShieldCheck = createLucideIcon('ShieldCheck', [\n  [\n    'path',\n    {\n      d: 'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z',\n      key: 'oel41y',\n    },\n  ],\n  ['path', { d: 'm9 12 2 2 4-4', key: 'dzmm74' }],\n]);\n\nexport default ShieldCheck;\n"],"names":[],"mappings":"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","ignoreList":[2,3]}